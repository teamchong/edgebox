diff --git a/quickjs-libc.c b/quickjs-libc.c
index a1b2c3d..e4f5678 100644
--- a/quickjs-libc.c
+++ b/quickjs-libc.c
@@ -56,6 +56,10 @@
 #include <errno.h>
 #include <fcntl.h>

+#if defined(__wasi__)
+#include <wasi/api.h>
+#endif
+
 #if !defined(_WIN32)
 #include <sys/ioctl.h>
 #include <poll.h>
@@ -822,7 +826,12 @@ static JSValue js_std_exit(JSContext *ctx, JSValueConst this_val,
     int status;
     if (JS_ToInt32(ctx, &status, argv[0]))
         status = -1;
+#if defined(__wasi__)
+    /* Use WASI proc_exit which can be trapped by the runtime */
+    __wasi_proc_exit(status);
+#else
     exit(status);
+#endif
     return JS_UNDEFINED;
 }
